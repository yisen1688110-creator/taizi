/* Market Tabs */
:root {
  /* 响应式布局所需的统一变量（使用 rem 保持相对缩放） */
  --container-max: 64rem;           /* 最大内容宽度，避免过度拉伸 */
  --gap-xxs: 0.5rem;                /* 8px 等效 */
  --gap-xs: 0.75rem;                /* 12px 等效 */
  --gap-sm: 1rem;                   /* 16px 等效 */
  --gap-md: 1.25rem;                /* 20px 等效 */
  --gap-lg: 1.5rem;                 /* 24px 等效 */
  --nav-space-mobile: 5.5rem;       /* 移动端顶部固定导航所占空间 */
  --nav-space-desktop: 6rem;        /* 桌面端顶部固定导航所占空间 */
}

/* 市场页容器：顶部固定导航时，内容需从顶部开始而非居中 */
.screen.market-screen {
  align-items: stretch !important;
  justify-content: flex-start !important;
  padding-top: 0 !important;
  background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 50%, #0f172a 100%) !important;
  min-height: 100vh;
}
.market-tabs { 
  display: flex;
  justify-content: flex-start;
  align-items: center;
  gap: var(--gap-xxs);
  margin: var(--gap-xs) 0 var(--gap-xxs);
  padding: 0;
  border-radius: 0;
  border: none;
  background: transparent;
  box-shadow: none;
}

/* 市场页面标题颜色 */
.market-screen .title,
.market-content .title {
  color: var(--text);
}

/* 固定导航栏样式 - 深色金融风 */
.market-navigation-fixed {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: rgba(10, 14, 23, 0.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
  display: flex;
  justify-content: flex-start;
}
.market-navigation-fixed .card {
  background: transparent;
  border: none;
  box-shadow: none;
}

/* 内容区域样式 - 统一间距比例 */
.market-content {
  /* 使用固定 rem 间距并采用网格布局，保证稳定 */
  display: grid;
  grid-template-columns: 1fr;
  gap: 0;
  /* 为移动端留出顶部固定导航空间 */
  padding-top: calc(var(--nav-space-mobile) + 0.5rem);
  max-width: 100%;
  width: 100%;
  margin: 0;
  padding-left: 16px;
  padding-right: 16px;
  padding-bottom: 100px;
  background: transparent;
  box-sizing: border-box;
}

/* 市场页面无卡片边框样式 */
.market-content > div { 
  margin-top: 0; 
  background: transparent;
  border: none;
  box-shadow: none;
}

/* 桌面端优化 - 保持固定导航栏 */
@media (min-width: 768px) {
  .market-navigation-fixed {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    background: rgba(10, 14, 23, 0.95);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
  }
  
  .market-content {
    /* 桌面端为固定导航栏留出空间 */
    padding-top: calc(var(--nav-space-desktop) + 0.5rem);
    max-width: 100%;
    margin: 0;
    padding-left: 24px;
    padding-right: 24px;
  }
  
  .market-tabs {
    margin: var(--gap-xxs) 0 var(--gap-xxs); /* 更紧凑，减少导航整体高度 */
    max-width: none;
    justify-content: flex-start;
  }
  
  .market-tabs .pill {
    height: 36px;
    padding: 0 16px;
    font-size: 15px;
    min-width: 120px;
  }
  
  /* 限制导航区域最大宽度，但内容区域不限制 */
  .market-navigation-fixed .card {
    max-width: var(--container-max);
    margin: 0 auto;
    padding-block: 0.75rem; /* 垂直内边距固定值 */
    padding-inline: 2vw;
    min-height: var(--nav-space-desktop);
    box-sizing: border-box;
  }

  /* 压缩导航标题的底部边距，进一步减少空隙 */
  .market-navigation-fixed .title {
    margin-bottom: 0.5rem;
  }
  
  /* 桌面端表格优化 - 更大的字体和间距 */
  .data-table {
    font-size: 16px; /* 增大字体 */
    margin: 0 auto;
    width: 100%;
  }
  
  .data-table th {
    font-size: 17px;
    font-weight: 600;
    padding: 16px 12px; /* 增加内边距 */
  }
  
  .data-table td {
    font-size: 16px;
    padding: 16px 12px; /* 增加内边距 */
    line-height: 1.5;
  }
  
  /* 桌面端收藏图标优化 */
  .favorite-star {
    width: 20px;
    height: 20px;
    font-size: 18px;
    padding: 0.25rem 0.375rem;
  }
  
  /* 大屏幕优化 - 更丰满的布局 */
  @media (min-width: 1200px) {
    .market-content {
      padding-left: 3vw; /* 大屏幕更多内边距 */
      padding-right: 3vw;
    }
    
    .data-table {
      font-size: 17px; /* 大屏幕更大字体 */
    }
    
    .data-table th {
      font-size: 18px;
      padding: 1.125rem 1rem; /* 大屏幕更大间距 */
    }
    
    .data-table td {
      font-size: 17px;
      padding: 1.125rem 1rem; /* 大屏幕更大间距 */
    }
  }
  
  /* 超大屏幕优化 */
  @media (min-width: 1600px) {
    .market-content {
      padding-left: 4vw; /* 超大屏幕最大内边距 */
      padding-right: 4vw;
    }
    
    .data-table {
      font-size: 18px; /* 超大屏幕最大字体 */
    }
    
    .data-table th {
      font-size: 19px;
      padding: 1.25rem 1.125rem; /* 超大屏幕最大间距 */
    }
    
    .data-table td {
      font-size: 18px;
      padding: 1.25rem 1.125rem; /* 超大屏幕最大间距 */
    }
  }
}

/* 搜索区与建议浮层的响应式处理 */
.search-row {
  display: flex;
  align-items: center;
  gap: var(--gap-xs);
  position: relative;
  flex-wrap: nowrap;
}
.search-label {
  flex-shrink: 0;
  white-space: nowrap;
  color: var(--text-secondary);
}

/* 描述文字颜色 */
.market-screen .desc,
.market-content .desc {
  color: var(--text-secondary);
}
.search-input {
  flex: 1;
  min-width: 100px;
  max-width: 100%;
  background: rgba(255, 255, 255, 0.05) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  color: var(--text) !important;
}
.search-input:focus {
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25) !important;
  background: rgba(255, 255, 255, 0.08) !important;
}
.search-input::placeholder {
  color: var(--muted) !important;
}
.suggestion-list {
  position: absolute;
  left: 0;
  right: 0;
  top: calc(100% + 6px);
  z-index: 5;
  max-height: 240px;
  overflow: auto;
  border: 1px solid #263b5e;
  border-radius: 10px;
  background: rgba(21,32,53,0.9);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
}
.suggestion-item {
  display: flex;
  gap: 6px;
  align-items: center;
  padding: 8px 10px;
  cursor: pointer;
}
.suggestion-item:hover { background: rgba(91,141,239,0.08); }
.suggestion-item.empty { color: #a8b3cf; }

@media (max-width: 480px) {
  .search-label { min-width: 120px; }
  .search-input { min-width: 80px; }
}

/* 默认 pill - 深色金融风 */
.pill { 
  height: 36px; 
  padding: 0 16px; 
  border-radius: var(--radius); 
  border: 1px solid rgba(255, 255, 255, 0.1); 
  background: rgba(255, 255, 255, 0.05); 
  color: var(--text); 
  cursor: pointer; 
  transition: all 0.2s ease;
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
}
.pill:hover { 
  border-color: var(--accent); 
  background: rgba(59, 130, 246, 0.15);
  color: var(--accent);
}
.pill.active { 
  border-color: var(--accent); 
  background: var(--accent);
  color: #ffffff;
  box-shadow: 0 2px 12px rgba(59, 130, 246, 0.4);
}

/* pill-group 容器 */
.pill-group {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

/* 移动端pill优化 */
@media (max-width: 480px) {
  .pill { 
    height: 30px; 
    padding: 0 10px; 
    font-size: 12px;
  }
  .pill-group {
    gap: 6px;
  }
  .pill-group .desc {
    font-size: 11px;
    width: 100%;
    margin-bottom: 2px;
  }
}

@media (max-width: 380px) {
  .pill { 
    height: 28px; 
    padding: 0 8px; 
    font-size: 11px;
  }
  .pill-group {
    gap: 4px;
  }
}

/* 市场切换专用：更紧凑并统一宽度 */
.market-tabs .pill {
  height: 2rem; 
  padding: 0 1rem; 
  font-size: 0.875rem; 
  font-weight: 600; 
  border-radius: var(--radius-sm); 
  min-width: 6.5rem; 
  text-align: center;
}
.market-tabs .pill.active { 
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.25);
  background: var(--accent);
  border-color: var(--accent);
  color: #ffffff;
}

/* 图标样式：增强识别度 */
.pill-icon {
  display: inline-block;
  width: 18px; height: 18px;
  margin-right: 8px;
  filter: drop-shadow(0 1px 1px rgba(0,0,0,0.25));
}

/* 下拉导航样式 */
.dropdown-nav {
  position: relative;
  display: inline-block;
}

.dropdown-trigger {
  display: flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.dropdown-trigger:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  background: rgba(17, 24, 39, 0.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  min-width: 200px;
  z-index: 1000;
  margin-top: 0;
  display: none;
  opacity: 0;
  transform: translateY(-10px);
  transition: all 0.2s ease;
  padding: 8px 0;
}

/* 添加伪元素来填补触发器和下拉菜单之间的间隙 */
.dropdown-menu::before {
  content: '';
  position: absolute;
  top: -8px;
  left: 0;
  right: 0;
  height: 8px;
  background: transparent;
}

@keyframes dropdownFadeIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.dropdown-section {
  padding: 12px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.dropdown-section:last-child {
  border-bottom: none;
}

.dropdown-label {
  display: block;
  padding: 0 16px 8px;
  font-size: 12px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.dropdown-item {
  display: block;
  width: 100%;
  padding: 10px 18px;
  background: none;
  border: none;
  color: var(--text);
  font-size: 14px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
  margin: 2px 0;
}

.dropdown-item:hover {
  background-color: var(--accent-light);
  color: var(--accent);
}

.dropdown-item.active {
  background-color: var(--accent-light);
  color: var(--accent);
  font-weight: 600;
}

.dropdown-item.active:hover {
  background-color: var(--accent-light);
}

/* 悬停显示下拉菜单 - 优化版本 */
.dropdown-nav:hover .dropdown-menu,
.dropdown-nav .dropdown-menu:hover {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

/* 确保下拉菜单容器在悬停时保持显示 */
.dropdown-nav {
  position: relative;
}

.dropdown-nav:hover .dropdown-menu {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

/* 移动端下拉菜单优化 */
@media (max-width: 767px) {
  /* 移动端下拉菜单改为点击触发，而非悬停 */
  .dropdown-nav:hover .dropdown-menu {
    display: none; /* 移动端禁用悬停效果 */
  }
  
  /* 移动端点击显示下拉菜单 */
  .dropdown-menu.mobile-show {
    display: block !important;
    opacity: 1 !important;
    transform: translateX(0) translateY(0) !important;
  }
  
  /* 移动端固定定位 + 高度限制，避免被挤出屏幕 */
  .dropdown-menu {
    position: fixed;
    top: calc(env(safe-area-inset-top, 0px) + var(--nav-space-mobile));
    left: 16px;
    right: 16px;
    transform: translateY(-10px);
    min-width: 280px; /* 适配移动端可读性 */
    max-width: calc(100vw - 32px);
    max-height: calc(100vh - var(--nav-space-mobile) - env(safe-area-inset-bottom, 0px) - 76px);
    overflow-y: auto;
    overscroll-behavior: contain;
    font-size: 16px; /* 触屏优化字体 */
    z-index: 10000; /* 盖住底部导航 */
  }
  
  .dropdown-item {
    padding: 12px 16px; /* 增加触摸区域 */
    font-size: 16px;
    min-height: 44px; /* 符合移动端最小触摸区域标准 */
    display: flex;
    align-items: center;
  }
  
  .dropdown-label {
    font-size: 14px;
    padding: 8px 16px 6px;
  }
  
  .dropdown-section {
    padding: 8px 0;
  }
  
  /* 移动端下拉菜单动画 */
  .dropdown-menu {
    animation: dropdownFadeInMobile 0.24s ease forwards;
  }
  
  @keyframes dropdownFadeInMobile {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* 移动端导航按钮优化 */
  .dropdown-trigger {
    min-height: 44px; /* 增加触摸区域 */
    padding: 8px 12px;
    font-size: 16px;
  }
}

/* 桌面端下拉菜单优化 */
@media (min-width: 768px) {
  .dropdown-menu {
    min-width: 220px;
  }
  
  .dropdown-item {
    font-size: 15px;
    padding: 10px 18px;
  }
  
  .dropdown-label {
    padding: 0 18px 10px;
  }
}

/* 小屏优化：自动换行并保持间距 */
@media (max-width: 767px) {
  .market-tabs { flex-wrap: wrap; gap: var(--gap-xxs); }
  .market-tabs .pill { flex: 1 1 30%; min-width: 6rem; }
  .market-navigation-fixed .card { min-height: var(--nav-space-mobile); padding-block: 0.75rem; }
  /* 小屏幕为固定导航栏留出空间，并额外下移首卡边框 */
  .market-content { 
    padding-top: calc(var(--nav-space-mobile) + 1.25rem);
    padding-left: 12px;
    padding-right: 12px;
  }
}

/* Chips 行与建议列表美化 */
.chips-row {
  display: flex;
  gap: 12px;
  align-items: center;
  margin-top: 8px;
  flex-wrap: wrap;
}
.pill.chip {
  height: 28px;
  padding: 0 12px;
  font-size: 12px;
  border-radius: 999px;
  border: 1px solid rgba(59, 130, 246, 0.3);
  background: rgba(59, 130, 246, 0.1);
  color: var(--text);
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
}
.pill.chip:hover {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.2);
}
.pill.pill-mini {
  height: 24px;
  padding: 0 8px;
  font-size: 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--text-secondary);
}
.pill.pill-mini:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}
.pill.pill-mini.chip-remove {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.2);
  color: var(--error);
}
.pill.pill-mini.chip-remove:hover {
  background: rgba(239, 68, 68, 0.2);
}

/* 优化收藏图标显示 */
.favorite-star {
  font-size: 16px;
  line-height: 1;
  padding: 2px 4px;
  border-radius: 4px;
  transition: all 0.2s ease;
}
.favorite-star:hover {
  background: rgba(91,141,239,0.2);
  transform: scale(1.1);
}

/* 表格样式 - 深色金融风 */
.data-table {
  font-size: 14px;
  background: rgba(17, 24, 39, 0.6);
  border-radius: var(--radius);
  border-collapse: separate;
  border-spacing: 0;
  overflow: hidden;
}
.data-table th {
  font-size: 13px;
  font-weight: 600;
  background: rgba(255, 255, 255, 0.03);
  color: var(--text-secondary);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  padding: 12px 10px;
}
.data-table td {
  font-size: 14px;
  line-height: 1.4;
  color: var(--text);
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  padding: 12px 10px;
}
.data-table tr:hover td {
  background: rgba(59, 130, 246, 0.05);
}
.data-table tr:last-child td {
  border-bottom: none;
}

/* 表格在窄屏保持布局稳固，允许自动换行并避免挤出屏幕 */
.data-table { table-layout: fixed; width: 100%; }
.data-table th, .data-table td { word-wrap: break-word; white-space: normal; }
.news-grid, .chips-row { max-width: min(100vw - 32px, var(--container-max)); }

.suggestion-list {
  border: 1px solid #263b5e;
  border-radius: 8px;
  background: rgba(21,32,53,0.9);
  box-shadow: 0 6px 14px rgba(0,0,0,0.35);
}
.suggestion-item {
  padding: 8px 10px;
  color: #a8b3cf;
  cursor: pointer;
  display: flex;
  gap: 6px;
  align-items: baseline;
}
.suggestion-item:hover { background: rgba(91,141,239,0.12); }
.suggestion-item.empty { cursor: default; }
.suggestion-item .sug-sep { opacity: 0.6; }
.suggestion-item mark.hl {
  background: rgba(91,141,239,0.25);
  color: #e3e8f7;
  border-radius: 3px;
  padding: 0 1px;
}

/* ===== 移动端表格溢出优化 ===== */
.table-scroll {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: 0 -8px;
  padding: 0 8px;
}
.table-scroll::-webkit-scrollbar {
  height: 6px;
}
.table-scroll::-webkit-scrollbar-thumb {
  background: rgba(91,141,239,0.35);
  border-radius: 6px;
}
.table-scroll::-webkit-scrollbar-track {
  background: rgba(0,0,0,0.1);
  border-radius: 6px;
}

/* 移动端表格基础优化 */
@media (max-width: 768px) {
  .data-table {
    table-layout: auto;
    min-width: 480px; /* 确保表格有最小宽度，允许水平滚动 */
  }
  .data-table th,
  .data-table td {
    padding: 10px 8px;
    font-size: 13px;
    white-space: nowrap;
  }
  /* 名称列允许换行 */
  .data-table td:nth-child(2) {
    white-space: normal;
    word-break: break-word;
    max-width: 100px;
  }
  .pill-group { flex-wrap: wrap; }
}

/* 小屏幕：更紧凑的表格 */
@media (max-width: 480px) {
  .data-table {
    min-width: 420px;
  }
  .data-table th,
  .data-table td {
    padding: 8px 6px;
    font-size: 12px;
  }
  .data-table td:nth-child(2) {
    max-width: 80px;
  }
  /* 趋势图列紧凑 */
  .data-table td:last-child svg {
    width: 70px;
    height: 22px;
  }
}

/* 极小屏幕：进一步优化 */
@media (max-width: 380px) {
  .data-table {
    min-width: 380px;
  }
  .data-table th,
  .data-table td {
    padding: 6px 4px;
    font-size: 11px;
  }
  .data-table td:nth-child(2) {
    max-width: 60px;
  }
  .data-table td:last-child svg {
    width: 60px;
    height: 20px;
  }
}
